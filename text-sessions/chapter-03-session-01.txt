File: chapter-03-session-01.txt
Date: Wed 06 Jan 2021 06:39:33 PM +08
Author: WRY wruslandr@gmail.com

LOCATE system.ads
===========================================================
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-microbit/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-rpi2/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-samv71/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-stm32f4/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-stm32f429disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-stm32f469disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-stm32f746disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-stm32f769disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-tms570/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-tms570lc/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-full-zynq7000/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-microbit/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-rpi2/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-samv71/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-stm32f4/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-stm32f429disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-stm32f469disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-stm32f746disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-stm32f769disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-tms570/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-tms570lc/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/ravenscar-sfp-zynq7000/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-cortex-m0/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-cortex-m0p/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-cortex-m1/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-cortex-m3/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-cortex-m4/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-cortex-m4f/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-cortex-m7df/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-cortex-m7f/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-lm3s/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-microbit/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-rpi2/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-samv71/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-stm32f4/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-stm32f429disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-stm32f469disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-stm32f746disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-stm32f769disco/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-tms570/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-tms570lc/gnat/system.ads
/home/wruslan/opt/GNAT/2020-arm-elf/arm-eabi/lib/gnat/zfp-zynq7000/gnat/system.ads
/usr/lib/gcc/x86_64-linux-gnu/9/adainclude/system.ads
Ub2004-rt38:~/github/ada-embedded$

===========================================================
Ub2004-rt38:~/github/ada-embedded$ ls -al
total 20
drwxrwxr-x  3 wruslan wruslan 4096 Jan  5 11:44 .
drwxrwxr-x 13 wruslan wruslan 4096 Jan  5 11:29 ..
-rw-rw-r--  1 wruslan wruslan  226 Jan  5 11:39 ada_bismillah.adb
-rw-rw-r--  1 wruslan wruslan  559 Jan  5 11:40 ada_bismillah.ads
drwxrwxr-x  2 wruslan wruslan 4096 Jan  5 11:44 text-sessions
Ub2004-rt38:~/github/ada-embedded$ 

Ub2004-rt38:~/github/ada-embedded$ /home/wruslan/opt/GNAT/2020-arm-elf/bin/arm-eabi-gcc -S -mcpu=cortex-m0 -mthumb -mfloat-abi=soft ada_bismillah.adb
fatal error, run-time library not installed correctly
cannot locate file system.ads
compilation abandoned

Ub2004-rt38:~/github/ada-embedded$ /home/wruslan/opt/GNAT/2020-arm-elf/bin/arm-eabi-gcc -S -mcpu=cortex-m3 -mthumb ada_bismillah.adb
fatal error, run-time library not installed correctly
cannot locate file system.ads
compilation abandoned
Ub2004-rt38:~/github/ada-embedded$ 

https://comp.lang.ada.narkive.com/r2tjMpD7/how-to-configure-gnat-gpl-on-x86-64-linux-for-arm-elf-development

Ub2004-rt38:~/github/ada-embedded$ gprbuild -c -u -f ada_bismillah.adb --target=arm-eabi --RTS=zfp-stm32f4
using project file /usr/share/gpr/_default.gpr
gprconfig: can't find a toolchain for the following configuration:
gprconfig: language 'ada', target 'arm-eabi', runtime 'zfp-stm32f4'
Ub2004-rt38:~/github/ada-embedded$ 

===========================================================
PROBLEM ABOVE SOLVED BELOW in test-codes-01.
===========================================================
===========================================================
IDENTIFIED ARM COMPILER 
arm-linux-gnueabi-gnatgcc -> arm-linux-gnueabi-gcc-9

===========================================================
TEST ARM-ELF COMPILATION (SUCCESS)
===========================================================
The -S parameter below tells the compiler to prepare the assembly output 
instead of an object file. 

The -mcpu and -mthumb options are needed to limit the set of instructions 
to those understood by the target microcontroller - in the first variant
below, the Cortex-M0 chip was selected, which does not support floating-point 
instructions, and the second variant will be used for Cortex-M3 or better. 

When working with a specific chip, it makes sense to use values that 
correspond with the target device - thanks to this, the compiler will be 
free to use more elaborate instruction sets, leading to executables that 
are both smaller and faster.

If the command below was executed without errors, a new file (ada_bismillah.s), 
the assembler codes, should be created in the same directory. 

===========================================================
Ub2004-rt38:~/github/ada-embedded$ arm-linux-gnueabi-gnatgcc -S -mcpu=cortex-m0 -mthumb -mfloat-abi=soft ada_bismillah.adb
Ub2004-rt38:~/github/ada-embedded$ 
Ub2004-rt38:~/github/ada-embedded$ ls -al
total 28
drwxrwxr-x  3 wruslan wruslan 4096 Jan  6 16:32 .
drwxrwxr-x 13 wruslan wruslan 4096 Jan  5 11:29 ..
-rw-rw-r--  1 wruslan wruslan  226 Jan  5 11:39 ada_bismillah.adb
-rw-rw-r--  1 wruslan wruslan  572 Jan  6 16:32 ada_bismillah.ads
-rw-rw-r--  1 wruslan wruslan  529 Jan  6 16:32 ada_bismillah.ali
-rw-rw-r--  1 wruslan wruslan  829 Jan  6 16:32 ada_bismillah.s
drwxrwxr-x  3 wruslan wruslan 4096 Jan  6 16:30 text-sessions
Ub2004-rt38:~/github/ada-embedded$ mv ada_bismillah.ali m0-ada_bismillah.ali 
Ub2004-rt38:~/github/ada-embedded$ mv ada_bismillah.s   m0-ada_bismillah.s 
Ub2004-rt38:~/github/ada-embedded$ 

===========================================================
Ub2004-rt38:~/github/ada-embedded$ arm-linux-gnueabi-gnatgcc -S -mcpu=cortex-m3 -mthumb ada_bismillah.adb
Ub2004-rt38:~/github/ada-embedded$ 
Ub2004-rt38:~/github/ada-embedded$ ls -al
total 36
drwxrwxr-x  3 wruslan wruslan 4096 Jan  6 16:34 .
drwxrwxr-x 13 wruslan wruslan 4096 Jan  5 11:29 ..
-rw-rw-r--  1 wruslan wruslan  226 Jan  5 11:39 ada_bismillah.adb
-rw-rw-r--  1 wruslan wruslan  572 Jan  6 16:32 ada_bismillah.ads
-rw-rw-r--  1 wruslan wruslan  528 Jan  6 16:34 ada_bismillah.ali
-rw-rw-r--  1 wruslan wruslan  852 Jan  6 16:34 ada_bismillah.s
-rw-rw-r--  1 wruslan wruslan  529 Jan  6 16:32 m0-ada_bismillah.ali
-rw-rw-r--  1 wruslan wruslan  829 Jan  6 16:32 m0-ada_bismillah.s
drwxrwxr-x  3 wruslan wruslan 4096 Jan  6 16:34 text-sessions
Ub2004-rt38:~/github/ada-embedded$ mv ada_bismillah.s   m3-ada_bismillah.s 
Ub2004-rt38:~/github/ada-embedded$ mv ada_bismillah.ali m3-ada_bismillah.ali 
Ub2004-rt38:~/github/ada-embedded$ 

===========================================================
Ub2004-rt38:~/github/ada-embedded$ arm-linux-gnueabi-gnatgcc -S -mcpu=cortex-m7 -mthumb ada_bismillah.adb
Ub2004-rt38:~/github/ada-embedded$ ls -al
total 44
drwxrwxr-x  3 wruslan wruslan 4096 Jan  6 16:36 .
drwxrwxr-x 13 wruslan wruslan 4096 Jan  5 11:29 ..
-rw-rw-r--  1 wruslan wruslan  226 Jan  5 11:39 ada_bismillah.adb
-rw-rw-r--  1 wruslan wruslan  572 Jan  6 16:32 ada_bismillah.ads
-rw-rw-r--  1 wruslan wruslan  529 Jan  6 16:36 ada_bismillah.ali
-rw-rw-r--  1 wruslan wruslan  853 Jan  6 16:36 ada_bismillah.s
-rw-rw-r--  1 wruslan wruslan  529 Jan  6 16:32 m0-ada_bismillah.ali
-rw-rw-r--  1 wruslan wruslan  829 Jan  6 16:32 m0-ada_bismillah.s
-rw-rw-r--  1 wruslan wruslan  528 Jan  6 16:34 m3-ada_bismillah.ali
-rw-rw-r--  1 wruslan wruslan  852 Jan  6 16:34 m3-ada_bismillah.s
drwxrwxr-x  3 wruslan wruslan 4096 Jan  6 16:36 text-sessions
Ub2004-rt38:~/github/ada-embedded$ mv ada_bismillah.ali m7-ada_bismillah.ali 
Ub2004-rt38:~/github/ada-embedded$ mv ada_bismillah.s   m7-ada_bismillah.s 
Ub2004-rt38:~/github/ada-embedded$ 

===========================================================
Ub2004-rt38:~/github/ada-embedded$ ls -al
total 44
drwxrwxr-x  3 wruslan wruslan 4096 Jan  6 16:37 .
drwxrwxr-x 13 wruslan wruslan 4096 Jan  5 11:29 ..
-rw-rw-r--  1 wruslan wruslan  226 Jan  5 11:39 ada_bismillah.adb
-rw-rw-r--  1 wruslan wruslan  572 Jan  6 16:32 ada_bismillah.ads
-rw-rw-r--  1 wruslan wruslan  529 Jan  6 16:32 m0-ada_bismillah.ali
-rw-rw-r--  1 wruslan wruslan  829 Jan  6 16:32 m0-ada_bismillah.s
-rw-rw-r--  1 wruslan wruslan  528 Jan  6 16:34 m3-ada_bismillah.ali
-rw-rw-r--  1 wruslan wruslan  852 Jan  6 16:34 m3-ada_bismillah.s
-rw-rw-r--  1 wruslan wruslan  529 Jan  6 16:36 m7-ada_bismillah.ali
-rw-rw-r--  1 wruslan wruslan  853 Jan  6 16:36 m7-ada_bismillah.s
drwxrwxr-x  3 wruslan wruslan 4096 Jan  6 16:36 text-sessions
Ub2004-rt38:~/github/ada-embedded$ 

===========================================================
DISPLAY ASSEMBLER CODES (xxx.s) ABOVE.
===========================================================

===========================================================
ALHAMDULILLAH 3 TIMES WRY.
===========================================================

