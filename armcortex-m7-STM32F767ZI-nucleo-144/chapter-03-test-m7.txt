File: chapter-03-test-m7.txt
Date: Thu 07 Jan 2021 12:11:22 PM +08
Author: WRY wruslandr@gmail.com

===========================================================
GCC EQUIVALENTS FOR GNAT-ARM-ELF
===========================================================
gcc     ==> arm-linux-gnueabi-gnatgcc
nm      ==> arm-linux-gnueabi-nm
ld      ==> arm-linux-gnueabi-ld
objcopy ==> arm-linux-gnueabi-objcopy

===========================================================
APP VERSIONS FOR GNAT-ARM-ELF
===========================================================
Ub2004-rt38:~$ arm-linux-gnueabi-gnatgcc --version
arm-linux-gnueabi-gnatgcc (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0

Ub2004-rt38:~$ arm-linux-gnueabi-nm --version
GNU nm (GNU Binutils for Ubuntu) 2.34

Ub2004-rt38:~$ arm-linux-gnueabi-ld --version
GNU ld (GNU Binutils for Ubuntu) 2.34

Ub2004-rt38:~$ arm-linux-gnueabi-objcopy --version
GNU objcopy (GNU Binutils for Ubuntu) 2.34

===========================================================
STARTING FILES
===========================================================
Ub2004-rt38:~/github/embedded-ada-tests$ cd test-m7-codes/
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ ls -al
total 44
drwxrwxr-x  2 wruslan wruslan  4096 Jan  7 11:52 .
drwxrwxr-x 10 wruslan wruslan  4096 Jan  6 22:45 ..
-rw-rw-r--  1 wruslan wruslan 14999 Jan  7 11:52 chapter-03-test-m7.txt
-rw-r--r--  1 wruslan wruslan   218 Mar 12  2016 flash.ld
-rw-r--r--  1 wruslan wruslan   122 Mar  4  2016 program.adb
-rw-r--r--  1 wruslan wruslan    86 Mar  4  2016 program.ads
-rw-rw-r--  1 wruslan wruslan    40 Jan  7 10:03 wr_unwind.c
-rw-rw-r--  1 wruslan wruslan    36 Jan  7 10:03 wr_unwind.h
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

===========================================================
SOURCE CODE CONTENTS (5 files)
===========================================================
Ub2004-rt38:~/github/embedded-ada-tests/test-m0-codes$ cat flash.ld 
OUTPUT_FORMAT("elf32-littlearm")
OUTPUT_ARCH(arm)

SECTIONS
{
    .vectors 0x08000000 :
    {
        LONG(0x20010000)
        LONG(run + 1)
        FILL(0)
    }

    .text 0x08000200 :
    {
        *(.text)
    }
}
Ub2004-rt38:~/github/embedded-ada-tests/test-m0-codes$ cat program.adb
package body Program is

   procedure Run is
   begin
      loop
         null;
      end loop;
   end Run;

end Program;
Ub2004-rt38:~/github/embedded-ada-tests/test-m0-codes$ cat program.ads
package Program is

   procedure Run;
   pragma Export (C, Run, "run");

end Program;
Ub2004-rt38:~/github/embedded-ada-tests/test-m0-codes$ cat wr_unwind.c
void __aeabi_unwind_cpp_pr0(void)
{
};

Ub2004-rt38:~/github/embedded-ada-tests/test-m0-codes$ cat wr_unwind.h
void __aeabi_unwind_cpp_pr0(void);

Ub2004-rt38:~/github/embedded-ada-tests/test-m0-codes$ 

===========================================================
$ gcc -S -mcpu=cortex-m7 -mthumb program.adb
===========================================================
$ arm-linux-gnueabi-gnatgcc -S -mcpu=cortex-m7 -mthumb program.adb

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-gnatgcc -S -mcpu=cortex-m7 -mthumb program.adb
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ ls -al
total 52
drwxrwxr-x  2 wruslan wruslan  4096 Jan  7 11:54 .
drwxrwxr-x 10 wruslan wruslan  4096 Jan  6 22:45 ..
-rw-rw-r--  1 wruslan wruslan 14800 Jan  7 11:53 chapter-03-test-m7.txt
-rw-r--r--  1 wruslan wruslan   218 Mar 12  2016 flash.ld
-rw-r--r--  1 wruslan wruslan   122 Mar  4  2016 program.adb
-rw-r--r--  1 wruslan wruslan    86 Mar  4  2016 program.ads
-rw-rw-r--  1 wruslan wruslan   442 Jan  7 11:54 program.ali
-rw-rw-r--  1 wruslan wruslan   773 Jan  7 11:54 program.s    <== THIS ONE
-rw-rw-r--  1 wruslan wruslan    40 Jan  7 10:03 wr_unwind.c
-rw-rw-r--  1 wruslan wruslan    36 Jan  7 10:03 wr_unwind.h
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

===========================================================
$ gcc -S -mcpu=cortex-m7 -mthumb wr_unwind.c
===========================================================
$ arm-linux-gnueabi-gnatgcc -S -mcpu=cortex-m7 -mthumb wr_unwind.c

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-gnatgcc -S -mcpu=cortex-m7 -mthumb wr_unwind.c
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ ls -al
total 56
drwxrwxr-x  2 wruslan wruslan  4096 Jan  7 11:55 .
drwxrwxr-x 10 wruslan wruslan  4096 Jan  6 22:45 ..
-rw-rw-r--  1 wruslan wruslan 15660 Jan  7 11:55 chapter-03-test-m7.txt
-rw-r--r--  1 wruslan wruslan   218 Mar 12  2016 flash.ld
-rw-r--r--  1 wruslan wruslan   122 Mar  4  2016 program.adb
-rw-r--r--  1 wruslan wruslan    86 Mar  4  2016 program.ads
-rw-rw-r--  1 wruslan wruslan   442 Jan  7 11:54 program.ali
-rw-rw-r--  1 wruslan wruslan   773 Jan  7 11:54 program.s
-rw-rw-r--  1 wruslan wruslan    40 Jan  7 10:03 wr_unwind.c
-rw-rw-r--  1 wruslan wruslan    36 Jan  7 10:03 wr_unwind.h
-rw-rw-r--  1 wruslan wruslan   762 Jan  7 11:55 wr_unwind.s  <== THIS ONE
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

===========================================================
$ cat program.s
===========================================================
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ cat program.s
	.cpu cortex-m7
	.eabi_attribute 20, 1
	.eabi_attribute 21, 1
	.eabi_attribute 23, 3
	.eabi_attribute 24, 1
	.eabi_attribute 25, 1
	.eabi_attribute 26, 2
	.eabi_attribute 30, 6
	.eabi_attribute 34, 1
	.file	"program.adb"
	.text
	.align	2
	.global	run
	.arch armv7e-m
	.syntax unified
	.thumb
	.thumb_func
	.fpu softvfp
	.type	run, %function
run:
	.fnstart
.LFB2:
	@ args = 0, pretend = 0, frame = 0
	@ frame_needed = 1, uses_anonymous_args = 0
	@ link register save eliminated.
	push	{r7}
	.save {r7}
	.setfp r7, sp, #0
	add	r7, sp, #0
.L3:
	nop
	b	.L3
	.fnend
	.size	run, .-run
	.global	program_E
	.data
	.align	1
	.type	program_E, %object
	.size	program_E, 2
program_E:
	.space	2
	.ident	"GCC: (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0"
	.section	.note.GNU-stack,"",%progbits
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

===========================================================
$ cat wr_unwind.s
===========================================================
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ cat wr_unwind.s
	.cpu cortex-m7
	.eabi_attribute 20, 1
	.eabi_attribute 21, 1
	.eabi_attribute 23, 3
	.eabi_attribute 24, 1
	.eabi_attribute 25, 1
	.eabi_attribute 26, 2
	.eabi_attribute 30, 6
	.eabi_attribute 34, 1
	.eabi_attribute 18, 4
	.file	"wr_unwind.c"
	.text
	.align	1
	.global	__aeabi_unwind_cpp_pr0
	.arch armv7e-m
	.syntax unified
	.thumb
	.thumb_func
	.fpu softvfp
	.type	__aeabi_unwind_cpp_pr0, %function
__aeabi_unwind_cpp_pr0:
	@ args = 0, pretend = 0, frame = 0
	@ frame_needed = 1, uses_anonymous_args = 0
	@ link register save eliminated.
	push	{r7}
	add	r7, sp, #0
	nop
	mov	sp, r7
	@ sp needed
	pop	{r7}
	bx	lr
	.size	__aeabi_unwind_cpp_pr0, .-__aeabi_unwind_cpp_pr0
	.ident	"GCC: (Ubuntu 9.3.0-17ubuntu1~20.04) 9.3.0"
	.section	.note.GNU-stack,"",%progbits
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

CREATE OBJECT FILE
===========================================================
$ gcc -c -mcpu=cortex-m7 -mthumb program.adb
===========================================================
$ arm-linux-gnueabi-gnatgcc -c -mcpu=cortex-m7 -mthumb program.adb

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-gnatgcc -c -mcpu=cortex-m7 -mthumb program.adb
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ ls -al
total 60
drwxrwxr-x  2 wruslan wruslan  4096 Jan  7 12:00 .
drwxrwxr-x 10 wruslan wruslan  4096 Jan  6 22:45 ..
-rw-rw-r--  1 wruslan wruslan 14684 Jan  7 11:59 chapter-03-test-m7.txt
-rw-r--r--  1 wruslan wruslan   218 Mar 12  2016 flash.ld
-rw-r--r--  1 wruslan wruslan   122 Mar  4  2016 program.adb
-rw-r--r--  1 wruslan wruslan    86 Mar  4  2016 program.ads
-rw-rw-r--  1 wruslan wruslan   442 Jan  7 12:00 program.ali
-rw-rw-r--  1 wruslan wruslan  1120 Jan  7 12:00 program.o   <== THIS ONE
-rw-rw-r--  1 wruslan wruslan   773 Jan  7 11:54 program.s
-rw-rw-r--  1 wruslan wruslan    40 Jan  7 10:03 wr_unwind.c
-rw-rw-r--  1 wruslan wruslan    36 Jan  7 10:03 wr_unwind.h
-rw-rw-r--  1 wruslan wruslan   762 Jan  7 11:55 wr_unwind.s
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

CREATE OBJECT FILE
===========================================================
$ gcc -c -mcpu=cortex-m7 -mthumb wr_unwind.c
===========================================================
$ arm-linux-gnueabi-gnatgcc -c -mcpu=cortex-m7 -mthumb wr_unwind.c

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-gnatgcc -c -mcpu=cortex-m7 -mthumb wr_unwind.c
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ ls -al
total 64
drwxrwxr-x  2 wruslan wruslan  4096 Jan  7 12:02 .
drwxrwxr-x 10 wruslan wruslan  4096 Jan  6 22:45 ..
-rw-rw-r--  1 wruslan wruslan 14623 Jan  7 12:01 chapter-03-test-m7.txt
-rw-r--r--  1 wruslan wruslan   218 Mar 12  2016 flash.ld
-rw-r--r--  1 wruslan wruslan   122 Mar  4  2016 program.adb
-rw-r--r--  1 wruslan wruslan    86 Mar  4  2016 program.ads
-rw-rw-r--  1 wruslan wruslan   442 Jan  7 12:00 program.ali
-rw-rw-r--  1 wruslan wruslan  1120 Jan  7 12:00 program.o
-rw-rw-r--  1 wruslan wruslan   773 Jan  7 11:54 program.s
-rw-rw-r--  1 wruslan wruslan    40 Jan  7 10:03 wr_unwind.c
-rw-rw-r--  1 wruslan wruslan    36 Jan  7 10:03 wr_unwind.h
-rw-rw-r--  1 wruslan wruslan   840 Jan  7 12:02 wr_unwind.o  <== THIS ONE
-rw-rw-r--  1 wruslan wruslan   762 Jan  7 11:55 wr_unwind.s
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

===========================================================
$ nm program.o
===========================================================
$ arm-linux-gnueabi-nm program.o

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-nm program.o
         U __aeabi_unwind_cpp_pr0
00000000 D program_E
00000000 T run

===========================================================
$ nm wr_unwind.o
===========================================================
$ arm-linux-gnueabi-nm wr_unwind.o

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-nm wr_unwind.o
00000000 T __aeabi_unwind_cpp_pr0

===========================================================
START FILES TO CREATE ELF
===========================================================
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ ls -al
total 64
drwxrwxr-x  2 wruslan wruslan  4096 Jan  7 12:04 .
drwxrwxr-x 10 wruslan wruslan  4096 Jan  6 22:45 ..
-rw-rw-r--  1 wruslan wruslan 15662 Jan  7 12:04 chapter-03-test-m7.txt
-rw-r--r--  1 wruslan wruslan   218 Mar 12  2016 flash.ld
-rw-r--r--  1 wruslan wruslan   122 Mar  4  2016 program.adb
-rw-r--r--  1 wruslan wruslan    86 Mar  4  2016 program.ads
-rw-rw-r--  1 wruslan wruslan   442 Jan  7 12:00 program.ali
-rw-rw-r--  1 wruslan wruslan  1120 Jan  7 12:00 program.o
-rw-rw-r--  1 wruslan wruslan   773 Jan  7 11:54 program.s
-rw-rw-r--  1 wruslan wruslan    40 Jan  7 10:03 wr_unwind.c
-rw-rw-r--  1 wruslan wruslan    36 Jan  7 10:03 wr_unwind.h
-rw-rw-r--  1 wruslan wruslan   840 Jan  7 12:02 wr_unwind.o
-rw-rw-r--  1 wruslan wruslan   762 Jan  7 11:55 wr_unwind.s
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

CREATE ELF FILE FROM OBJECT FILES
===========================================================
$ ld -T flash.ld -o program.elf program.o wr_unwind.o
===========================================================
$ arm-linux-gnueabi-ld -T flash.ld -o program.elf program.o wr_unwind.o

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-ld -T flash.ld -o program.elf program.o wr_unwind.o
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ ls -al
total 72
drwxrwxr-x  2 wruslan wruslan  4096 Jan  7 12:05 .
drwxrwxr-x 10 wruslan wruslan  4096 Jan  6 22:45 ..
-rw-rw-r--  1 wruslan wruslan 14557 Jan  7 12:05 chapter-03-test-m7.txt
-rw-r--r--  1 wruslan wruslan   218 Mar 12  2016 flash.ld
-rw-r--r--  1 wruslan wruslan   122 Mar  4  2016 program.adb
-rw-r--r--  1 wruslan wruslan    86 Mar  4  2016 program.ads
-rw-rw-r--  1 wruslan wruslan   442 Jan  7 12:00 program.ali
-rwxrwxr-x  1 wruslan wruslan 66984 Jan  7 12:05 program.elf  <== THIS ONE
-rw-rw-r--  1 wruslan wruslan  1120 Jan  7 12:00 program.o
-rw-rw-r--  1 wruslan wruslan   773 Jan  7 11:54 program.s
-rw-rw-r--  1 wruslan wruslan    40 Jan  7 10:03 wr_unwind.c
-rw-rw-r--  1 wruslan wruslan    36 Jan  7 10:03 wr_unwind.h
-rw-rw-r--  1 wruslan wruslan   840 Jan  7 12:02 wr_unwind.o
-rw-rw-r--  1 wruslan wruslan   762 Jan  7 11:55 wr_unwind.s
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

===========================================================
$ nm program.elf
===========================================================
$ arm-linux-gnueabi-nm program.elf

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-nm program.elf
08000208 T __aeabi_unwind_cpp_pr0
08000224 D program_E
08000200 T run

CREATE BIN FILE FROM ELF FILE
===========================================================
$ objcopy -O binary program.elf program.bin
===========================================================
$ arm-linux-gnueabi-objcopy -O binary program.elf program.bin

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-objcopy -O binary program.elf program.bin
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ ls -al
total 76
drwxrwxr-x  2 wruslan wruslan  4096 Jan  7 12:08 .
drwxrwxr-x 10 wruslan wruslan  4096 Jan  6 22:45 ..
-rw-rw-r--  1 wruslan wruslan 14449 Jan  7 12:08 chapter-03-test-m7.txt
-rw-r--r--  1 wruslan wruslan   218 Mar 12  2016 flash.ld
-rw-r--r--  1 wruslan wruslan   122 Mar  4  2016 program.adb
-rw-r--r--  1 wruslan wruslan    86 Mar  4  2016 program.ads
-rw-rw-r--  1 wruslan wruslan   442 Jan  7 12:00 program.ali
-rwxrwxr-x  1 wruslan wruslan   550 Jan  7 12:08 program.bin  <== THIS ONE
-rwxrwxr-x  1 wruslan wruslan 66984 Jan  7 12:05 program.elf
-rw-rw-r--  1 wruslan wruslan  1120 Jan  7 12:00 program.o
-rw-rw-r--  1 wruslan wruslan   773 Jan  7 11:54 program.s
-rw-rw-r--  1 wruslan wruslan    40 Jan  7 10:03 wr_unwind.c
-rw-rw-r--  1 wruslan wruslan    36 Jan  7 10:03 wr_unwind.h
-rw-rw-r--  1 wruslan wruslan   840 Jan  7 12:02 wr_unwind.o
-rw-rw-r--  1 wruslan wruslan   762 Jan  7 11:55 wr_unwind.s
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

CREATE HEX FILE FROM ELF FILE
===========================================================
$ objcopy -O ihex program.elf program.hex
===========================================================
$ arm-linux-gnueabi-objcopy -O ihex program.elf program.hex

Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ arm-linux-gnueabi-objcopy -O ihex program.elf program.hex
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ ls -al
total 80
drwxrwxr-x  2 wruslan wruslan  4096 Jan  7 12:09 .
drwxrwxr-x 10 wruslan wruslan  4096 Jan  6 22:45 ..
-rw-rw-r--  1 wruslan wruslan 15605 Jan  7 12:09 chapter-03-test-m7.txt
-rw-r--r--  1 wruslan wruslan   218 Mar 12  2016 flash.ld
-rw-r--r--  1 wruslan wruslan   122 Mar  4  2016 program.adb
-rw-r--r--  1 wruslan wruslan    86 Mar  4  2016 program.ads
-rw-rw-r--  1 wruslan wruslan   442 Jan  7 12:00 program.ali
-rwxrwxr-x  1 wruslan wruslan   550 Jan  7 12:08 program.bin
-rwxrwxr-x  1 wruslan wruslan 66984 Jan  7 12:05 program.elf
-rw-rw-r--  1 wruslan wruslan   208 Jan  7 12:09 program.hex  <== THIS ONE
-rw-rw-r--  1 wruslan wruslan  1120 Jan  7 12:00 program.o
-rw-rw-r--  1 wruslan wruslan   773 Jan  7 11:54 program.s
-rw-rw-r--  1 wruslan wruslan    40 Jan  7 10:03 wr_unwind.c
-rw-rw-r--  1 wruslan wruslan    36 Jan  7 10:03 wr_unwind.h
-rw-rw-r--  1 wruslan wruslan   840 Jan  7 12:02 wr_unwind.o
-rw-rw-r--  1 wruslan wruslan   762 Jan  7 11:55 wr_unwind.s
Ub2004-rt38:~/github/embedded-ada-tests/test-m7-codes$ 

===========================================================
Note: It is the BIN file that is uploaded to the ARM-Cortex-M7 embedded board (STM32-F767ZI Nucleo-144)

[1]+  Stopped                 hexedit wr_unwind.o
Ub2004-rt38:~/github/embedded-ada-tests/test-m3-codes$ hexedit program.o

[2]+  Stopped                 hexedit program.o
Ub2004-rt38:~/github/embedded-ada-tests/test-m3-codes$ hexedit program.elf

[3]+  Stopped                 hexedit program.elf
Ub2004-rt38:~/github/embedded-ada-tests/test-m3-codes$ hexedit program.bin

[4]+  Stopped                 hexedit program.bin
Ub2004-rt38:~/github/embedded-ada-tests/test-m3-codes$ hexedit program.hex

[5]+  Stopped                 hexedit program.hex
Ub2004-rt38:~/github/embedded-ada-tests/test-m3-codes$ 

=========================================================
UPLOAD BIN FILE
=========================================================
Ub2004-rt38:~/github/embedded-ada-tests/armcortex-m7-STM32F767ZI-nucleo-144$ which openocd
/usr/bin/openocd

Ub2004-rt38:~/github/embedded-ada-tests/armcortex-m7-STM32F767ZI-nucleo-144$ openocd --version
Open On-Chip Debugger 0.10.0
Licensed under GNU GPL v2
For bug reports, read
	http://openocd.org/doc/doxygen/bugs.html
Ub2004-rt38:~/github/embedded-ada-tests/armcortex-m7-STM32F767ZI-nucleo-144$ 

===========================================================
STEP 1 - COPY st_nucleo_f4.cfg TO BECOME st_nucleo_f7.cfg
===========================================================
STM32 Nucleo-144: Connect the board to the USB port in your computer.

We will use the OpenOCD tool, which from version 0.10 should contain the 
configuration script for STM32F7x boards, but since this tutorial was written 
before the official release of this version, some tips might be helpful 
if you try to use some earlier variant.

Check the scripts/board/st_nucleo_f7.cfg file and if it does not exist, 
create it as a copy of and replace the line: 
    source [find target/stm32f4x.cfg]
WITH
    source [find target/stm32f7x.cfg]

$ locate st_nucleo_f4.cfg
/usr/share/openocd/scripts/board/st_nucleo_f4.cfg

$ sudo cp /usr/share/openocd/scripts/board/st_nucleo_f4.cfg /usr/share/openocd/scripts/board/st_nucleo_f7.cfg
[sudo] password for wruslan: 
$ 

$ sudo gedit /usr/share/openocd/scripts/board/st_nucleo_f7.cfg

# Contents of st_nucleo_f7.cfg file
# This is for all ST NUCLEO with any STM32F4. Known boards at the moment:
# STM32F401RET6
# http://www.st.com/web/catalog/tools/FM116/SC959/SS1532/LN1847/PF260000
# STM32F411RET6
# http://www.st.com/web/catalog/tools/FM116/SC959/SS1532/LN1847/PF260320

source [find interface/stlink-v2-1.cfg]

transport select hla_swd

source [find target/stm32f7x.cfg]         <=== THIS ONE REPLACED

reset_config srst_only

===========================================================
STEP 2 - Connect computer to Nucleo-144 board on USB Power Port
===========================================================
Run upload using openocd

$ openocd -s scripts/ -f board/st_nucleo_f7.cfg -c 'program program.bin reset exit 0x08000000'

/armcortex-m7-STM32F767ZI-nucleo-144$ openocd -s scripts/ -f board/st_nucleo_f7.cfg -c 'program program.bin reset exit 0x08000000'
Open On-Chip Debugger 0.10.0
Licensed under GNU GPL v2
For bug reports, read
	http://openocd.org/doc/doxygen/bugs.html
Info : The selected transport took over low-level target control. The results might differ compared to plain JTAG/SWD
adapter speed: 2000 kHz
adapter_nsrst_delay: 100
srst_only separate srst_nogate srst_open_drain connect_deassert_srst
srst_only separate srst_nogate srst_open_drain connect_deassert_srst
Info : Unable to match requested speed 2000 kHz, using 1800 kHz
Info : Unable to match requested speed 2000 kHz, using 1800 kHz
Info : clock speed 1800 kHz
Info : STLINK v2 JTAG v29 API v2 SWIM v18 VID 0x0483 PID 0x374B
Info : using stlink api v2
Info : Target voltage: 3.254881
Info : stm32f7x.cpu: hardware has 8 breakpoints, 4 watchpoints
target halted due to debug-request, current mode: Thread 
xPSR: 0x01000000 pc: 0x08009ef4 msp: 0x20002d58
** Programming Started **
auto erase enabled
Info : device id = 0x10016451
Info : flash size = 2048kbytes
Info : Single Bank 2048 kiB STM32F76x/77x found
target halted due to breakpoint, current mode: Thread 
xPSR: 0x61000000 pc: 0x20000046 msp: 0x20002d58
wrote 32768 bytes from file program.bin in 0.776439s (41.214 KiB/s)
** Programming Finished **
** Resetting Target **
shutdown command invoked
Ub2004-rt38:~/github/embedded-ada-tests/armcortex-m7-STM32F767ZI-nucleo-144$ 

===========================================================
ALHAMDULILLAH 3 TIMES WRY.
===========================================================

